<div class="bg-gray-100 min-h-screen flex flex-col">
  <!-- Navbar -->
  <header class="flex items-center justify-between px-5 py-3 bg-white border-b-2 border-gray-300">
    <div class="flex items-center">
      <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTXuH55vOVHO2LCF7rxvEYAfpEZqj3qvRuKnw&s" alt="KJC Logo" class="h-10 mr-2" />
      <span class="text-2xl font-semibold text-slate-800">KJC <strong class="text-yellow-500">VOX</strong></span>
    </div>
    <div class="flex items-center space-x-4">
      <span class="text-sm text-gray-600">Welcome, {{facultyName}}</span>
    </div>
  </header>

  <!-- Main Content -->
  <main class="flex-1 m-5 p-6 bg-white rounded-md shadow-sm">
    <h2 class="text-center text-3xl font-bold text-slate-800 mb-6">
      My <span class="text-yellow-500">Subjects</span>
    </h2>
    <p class="text-center text-gray-600 mb-8">View all your assigned subjects</p>

    <!-- Filters -->
    <div class="flex flex-wrap justify-between gap-4 px-2 text-lg font-semibold mb-8">
      <label class="flex items-center text-[#1e3a5f]">
        Semester:
        <select [(ngModel)]="semester" (change)="fetchAssignedSubjects()" class="ml-2 p-2 border-2 border-slate-400 rounded-md focus:outline-none focus:border-blue-500">
          <option [value]="1">I</option>
          <option [value]="2">II</option>
          <option [value]="3">III</option>
          <option [value]="4">IV</option>
        </select>
      </label>

      <label class="flex items-center text-[#1e3a5f]">
        Class:
        <select [(ngModel)]="className" (change)="fetchAssignedSubjects()" class="ml-2 p-2 border-2 border-slate-400 rounded-md focus:outline-none focus:border-blue-500">
          <option value="1MCA-A">1MCA-A</option>
          <option value="1MCA-B">1MCA-B</option>
          <option value="1MCA-C">1MCA-C</option>
          <option value="1MCA-D">1MCA-D</option>
          <option value="2MCA-A">2MCA-A</option>
          <option value="2MCA-B">2MCA-B</option>
          <option value="2MCA-C">2MCA-C</option>
          <option value="2MCA-D">2MCA-D</option>
          <option value="1MSC-A">1MSC-A</option>
          <option value="1MSC-B">1MSC-B</option>
          <option value="1MSC-C">1MSC-C</option>
          <option value="1MSC-D">1MSC-D</option>
          <option value="2MSC-A">2MSC-A</option>
          <option value="2MSC-B">2MSC-B</option>
          <option value="3MSC-C">3MSC-C</option>
          <option value="4MSC-D">4MSC-D</option>
        </select>
      </label>
    </div>

    <!-- Loading Indicator -->
    <div *ngIf="isLoading" class="text-center py-12">
      <div class="inline-block animate-spin rounded-full h-10 w-10 border-4 border-blue-600 border-t-transparent"></div>
      <p class="mt-3 text-gray-600 font-medium">Loading subjects...</p>
    </div>

    <!-- Error Message -->
    <div *ngIf="errorMessage && !isLoading" class="text-center py-12">
      <div class="bg-red-50 border border-red-200 rounded-lg p-4 max-w-md mx-auto">
        <p class="text-red-600 font-medium">{{ errorMessage }}</p>
      </div>
    </div>

    <!-- Assigned Subjects with colored left borders -->
    <div *ngIf="assignedSubjects.length > 0 && !isLoading && !errorMessage" class="max-w-5xl mx-auto">
      <div *ngFor="let subject of assignedSubjects; let i = index" 
           class="bg-white border-l-4 shadow-sm rounded-lg p-5 mb-4 flex justify-between items-center hover:shadow-md transition-shadow"
           [ngClass]="{
             'border-blue-500': i % 5 === 0,
             'border-yellow-500': i % 5 === 1,
             'border-green-500': i % 5 === 2,
             'border-purple-500': i % 5 === 3,
             'border-red-500': i % 5 === 4
           }">
        <div class="flex-1">
          <p class="text-xl font-bold text-slate-800 mb-1">{{ subject.name }} <span class="text-gray-400 text-sm font-normal">({{ subject.courseCode }})</span></p>
          <p class="text-sm text-gray-600">Course Code: <span class="font-medium">{{ subject.courseCode }}</span></p>
          <p class="text-sm text-gray-600">Assigned Faculty: <span class="font-medium">{{ subject.assignedFaculty }}</span></p>
        </div>
        <button
          (click)="viewFeedback(subject)"
          class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors font-medium ml-4"
        >
          View Feedback
        </button>
      </div>
    </div>

    <!-- No Subjects Message -->
    <div *ngIf="assignedSubjects.length === 0 && !isLoading && !errorMessage" class="text-center py-12">
      <div class="bg-gray-50 border border-gray-200 rounded-lg p-8 max-w-md mx-auto">
        <svg class="w-16 h-16 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
        </svg>
        <p class="text-gray-600 font-medium text-lg">
          No subjects assigned
        </p>
        <p class="text-gray-500 text-sm mt-2">
          for the selected class and semester.
        </p>
      </div>
    </div>

  </main>

  <!-- Footer -->
  <footer class="bg-[#1e3a5f] text-white text-center py-3 text-sm mt-auto">
    <p>Â© KJC VOX. All rights reserved.</p>
  </footer>
</div>